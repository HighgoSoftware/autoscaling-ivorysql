---
data_dir: /tmp
api:
  enabled: true
  address: "0.0.0.0:8686"
  playground: false
sources:
  host_metrics:
    filesystem:
      devices:
        excludes: [binfmt_misc]
      filesystems:
        excludes: [binfmt_misc]
      mountPoints:
        excludes: ["*/proc/sys/fs/binfmt_misc"]
    type: host_metrics
    scrape_interval_secs: 1 # default is 15, but we scrape every 5s in autoscaler-agent
  sql_exporter_metrics:
    type: prometheus_scrape
    # sql_exporter listen addr, exporting LFC statistics.
    # This statistics will only be available when using the neon compute image. A custom image
    # does not have this exporter by default.
    endpoints: ["http://127.0.0.1:9399/metrics"]
    # The data might be delayed as we use the default scrape interval. Some SQLs are not
    # trivial to execute, and therefore we don't want them to run every second.
sinks:
  prom_exporter:
    type: prometheus_exporter
    inputs:
      - host_metrics
      - sql_exporter_metrics
    address: "0.0.0.0:9100"
